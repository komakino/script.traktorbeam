import re, xbmcgui
from unidecode import unidecode
from traktorbeam import log


def clean_title(title):
    if not title:
        return ''
    title = unidecode(title.encode('utf8').decode('utf8')).lower()
    title = re.sub(u'[\s.]+', ' ', title)
    title = re.sub(u'(?u)[^a-z0-9_ ]', '', title)
    return title.strip()

def selectAction(title, options):
    ret = xbmcgui.Dialog().select(title, [opt[0] for opt in options])
    if 0 <= ret < len(options) and len(options[ret]) > 1 and hasattr(options[ret][1], '__call__'): 
        log.info('Running action: %s' % options[ret][0])
        options[ret][1]()

