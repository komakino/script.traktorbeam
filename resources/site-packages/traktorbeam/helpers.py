import re
from unidecode import unidecode
from traktorbeam import log


def clean_title(title):
    if not title:
        return ''
    title = unidecode(title.encode('utf8').decode('utf8')).lower()
    title = re.sub(u'[\s.]+', ' ', title)
    title = re.sub(u'(?u)[^a-z0-9_ ]', '', title)
    return title.strip()